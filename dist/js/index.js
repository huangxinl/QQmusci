var songList,$=window.Zepto,root=window.player,$scope=$(document.body),index=0,audio=new root.audioControl;function bindEvent(){$scope.on("play:change",function(o,t){audio.getAudio(songList[t].audio),"play"==audio.status&&(audio.play(),root.process.start()),root.render(songList[t]),root.process.renderAlltime(songList[t].duration),root.process.update(0)}),$scope.on("click",".prev",function(){var o=controlManager.prev();$scope.trigger("play:change",o)}),$scope.on("click",".next",function(){var o=controlManager.next();$scope.trigger("play:change",o)}),$scope.on("click",".play",function(){"play"==audio.status?(audio.pause(),root.process.stop()):(audio.play(),root.process.start()),$(this).toggleClass("pause")})}function bindTouch(){var o=$scope.find(".circle"),t=$scope.find(".cover").offset(),e=t.left,a=t.width;o.on("touchstart",function(){root.process.stop()}).on("touchmove",function(o){var t=(o.changedTouches[0].clientX-e)/a;(t<0||1<t)&&(t=0),root.process.update(t)}).on("touchend",function(o){var t=(o.changedTouches[0].clientX-e)/a;(t<0||1<t)&&(t=0);var n=t*songList[controlManager.index].duration;audio.playto(n),root.process.start(t),$scope.find(".play").addClass("pause")})}function getData(o){$.ajax({type:"GET",url:o,success:function(o){root.render(o[0]),songList=o,bindEvent(),controlManager=new root.controlManager(o.length),$scope.trigger("play:change",0),bindTouch()},error:function(){}})}getData("../mock/data.json");